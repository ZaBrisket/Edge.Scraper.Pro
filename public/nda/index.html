<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>NDA Reviewer v2 â€” EdgeScraperPro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta http-equiv="Content-Security-Policy" content="
default-src 'self';
img-src 'self' data:;
style-src 'self' 'unsafe-inline';
connect-src 'self' data:;
script-src 'self' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://unpkg.com 'unsafe-eval' 'wasm-unsafe-eval';
worker-src 'self' blob:;
child-src 'self' blob:;
font-src 'self' data:;
object-src 'none';
base-uri 'self';
frame-ancestors 'none';
  ">

  <link rel="stylesheet" href="./nda.css" />
</head>
<body>
  <header class="site-header">
    <nav>
      <a href="/">Scrape</a>
      <a href="/targets">Target Lists</a>
      <span aria-current="page">NDA Reviewer</span>
    </nav>
  </header>

  <main class="container" id="app" aria-busy="false">
    <h1>Intelligent NDA Reviewer v2</h1>
    <p class="disclaimer">
      Upload an NDA or paste the text to compare against the Edgewater checklist. Processing occurs server-side with tracked changes export support.
      <strong>Not legal advice.</strong>
    </p>

    <div id="app-error" class="alert" role="status" aria-live="polite" hidden></div>

    <section class="input-panel" aria-label="Document input">
      <label for="nda-text-input">Paste NDA text (optional, max 50,000 characters)</label>
      <textarea id="nda-text-input" maxlength="50000" placeholder="Paste NDA text here"></textarea>
      <div class="controls">
        <span id="text-stats" class="muted">0 / 50,000</span>
      </div>
      <div class="file-row">
        <label for="nda-file-input">Or upload a Word document (.docx, up to 5MB)</label>
        <input type="file" id="nda-file-input" accept=".docx" />
        <span id="file-meta" class="muted" aria-live="polite"></span>
      </div>
      <div class="action-row">
        <button id="analyze-btn" class="primary">Analyze NDA</button>
      </div>
      <div id="progress" class="progress" aria-hidden="true">
        <div id="progress-bar" class="progress-bar" style="width:0%"></div>
        <div id="progress-text" class="progress-text">Idle</div>
      </div>
    </section>

    <section id="analysis-summary" class="summary" aria-live="polite" hidden>
      <div class="summary-cards">
        <div class="summary-card">
          <span class="label">Total clauses</span>
          <span id="metric-total" class="value">0</span>
        </div>
        <div class="summary-card">
          <span class="label">Matched clauses</span>
          <span id="metric-matched" class="value">0</span>
        </div>
        <div class="summary-card">
          <span class="label">Missing clauses</span>
          <span id="metric-missing" class="value">0</span>
        </div>
      </div>
      <div id="warnings" class="warnings" hidden></div>
    </section>

    <section id="issues-panel" class="issues" hidden aria-live="polite">
      <div class="issues-header">
        <h2>Checklist Findings</h2>
        <div class="issue-actions">
          <button id="select-all" class="secondary" type="button">Select all</button>
          <button id="clear-all" class="secondary" type="button">Clear all</button>
        </div>
      </div>
      <p class="muted">Toggle the issues to include before exporting tracked changes. Items are grouped by severity.</p>
      <div class="issue-groups">
        <div class="issue-group" data-severity="critical">
          <h3>Critical</h3>
          <ul id="issues-critical" class="issue-list" aria-label="Critical issues"></ul>
        </div>
        <div class="issue-group" data-severity="medium">
          <h3>Medium</h3>
          <ul id="issues-medium" class="issue-list" aria-label="Medium issues"></ul>
        </div>
        <div class="issue-group" data-severity="low">
          <h3>Low</h3>
          <ul id="issues-low" class="issue-list" aria-label="Low issues"></ul>
        </div>
      </div>
      <div class="export-row">
        <button id="export-redlines" class="primary" type="button" disabled>Export tracked changes (.docx)</button>
      </div>
    </section>

    <section id="extracted-panel" class="extracted" hidden>
      <h2>Extracted Text</h2>
      <pre id="extracted-text" class="mono" aria-live="polite"></pre>
    </section>

    <p class="scope">
      Scope: NDA review only. Checklist items sourced from Edgewater playbook. Suggestions are deterministic and explainable.
    </p>
  </main>

  <script type="module" src="./js/nda.js"></script>
</body>
</html>
